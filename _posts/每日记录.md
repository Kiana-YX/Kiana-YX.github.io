# 开端 

### 5月20日

1. 理论力学复习

    公理：人们再生活和生产实践中长期积累的经验总结，被确认是符合客观实际的最普遍、最一般的规律。
    
    公理1：力的平行四边形法则

    公理2：二力平衡条件

    公理3：加减平衡力系原理

### 5月23日

波特率115200，可设置

[URG-04LX](https://blog.csdn.net/zzzztttttffffff/article/details/109259170)


```
安装
sudo apt-get install ros-melodic-urg-node

查询连接端口
rosrun urg_node getID /dev/ttyACM0

运行
rosrun urg_node urg_node

rviz -f laser
```

![](https://pictures-kiana.oss-cn-beijing.aliyuncs.com/img/202205262133321.png)

### 5月24日

1. [树莓派镜像工具](https://www.raspberrypi.com/software/)

    ```
    sudo apt install rpi-imager     
    ```
2. ubuntu-mate清华源

    死亡

3. 手势识别

    ![](https://pictures-kiana.oss-cn-beijing.aliyuncs.com/img/202205241040758.png)

    ![](https://pictures-kiana.oss-cn-beijing.aliyuncs.com/img/202205241042175.png)


### 5月25日

1. [rosdep update失败](https://zhuanlan.zhihu.com/p/365183222)

2. [cartography](https://blog.csdn.net/yqziqian2/article/details/118100338)

3. 远程连接

   1. nomachine——失败
    
        [nomachine法](https://blog.csdn.net/zong596568821xp/article/details/108001798)

    2. [vino-server + VNCViewer](https://blog.csdn.net/ywueoei/article/details/104964192)
    
        ![成功](https://pictures-kiana.oss-cn-beijing.aliyuncs.com/img/202205252216265.png)

        [安装VNCViewer](https://blog.csdn.net/qqliuzhitong/article/details/117253750)

        使用ifconfig 获取ip地址

        启动Vino-serve `/usr/lib/vino-server`

        我这边似乎要用手机共享网络，再同时连接wifi才可以，好奇怪

### 5月26日

1. [nano读取urg雷达数据](https://blog.csdn.net/zzzztttttffffff/article/details/109259170)

    注意要给串口权限

    ` sudo chmod 777 /dev/ttyACM0`

2. 语音识别模块

    下载程序似乎有点问题

    代码中无法选择版本？

3. [cartography纯雷达建图](https://zhuanlan.zhihu.com/p/94983364)

    注意`source install_isolated/setup.bash`一下，后添加到bashrc中

    运行`roslaunch cartographer_ros demo_revo_lds.launch `似乎修改完后要删除isolated文件夹，再重新`catkin_make_isolated --install --use-ninja`一下，不太懂

    ![](https://pictures-kiana.oss-cn-beijing.aliyuncs.com/img/202205310825775.png)

### 5月30日

开会+填毕业生登记表，梦回大一填实验报告的日子。感谢冷哥帮我填班组意见，感谢字美人善的张可帮我填学校意见！

熬到1：30，早上7：00继续肝，肝完交给班长后继续调整研电赛论文

一天都没啥精神，哎

### 6月1日

儿童节快乐！

肝完转正申请书+介绍人意见

爸爸发的幸运红包，妈妈抢162.46，我只抢了25.54，不过后面补发了一次专用红包hhh

整理一波报账资料交给队长啦

### 6月2日

1. 稿纸模式

    鸡肋但有趣

2. 页面固定行列

    ![页面布局-页边距](https://pictures-kiana.oss-cn-beijing.aliyuncs.com/img/202206021730275.png)

    页面布局-行号



### 5月27日

1. cartography建图

    效果可能还行？勉强有个图

2. 尝试识别拉戈里

    效果不行，怀疑运动畸变，加上反射率问题让圆变椭圆。

### 5月28日

1. 便携显示器到了，蛮好玩的？
   
2. 划水+开会+报账

3. 幸好赶上马术赛基金申报

### 5月29日

1. ITF最后一次训练

    武道知识没记住，动作也不熟，哎

2. 天韵生日，欠一顿饭

3. win11右键搞人心态——好像没用，，，

    管理员运行命令：reg.exe add "HKCU\Software\Classes\CLSID\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\InprocServer32" /f /ve 重启就恢复win10右键了
    
    reg.exe delete "HKCU\Software\Classes\CLSID\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\InprocServer32" /va /f 这个是恢复win11右键


4. Ubuntu 22.04版本

    通过nVidia setting 修改显示器亮度

### 6月21日

听雪龙大哥讲述过去的日子

18级机器人队群中19人，实到18人->其中一人是阎海莉小号

真的很荣幸遇到你们

### 6月22日

毕业典礼

用餐券领到鸡腿

动机九班拍了最后一张照

下午拿到学位证与毕业证

### 6月23日

银泰苏梅花园体验泰国菜，其实还不错

### 6月24日

万林敦煌展打卡！

《风声》电影

### 6月25日

早上锅锅回家了，帮她寄最后一次文件

第一位离校的室友

### 6月27日

1. webots四轮小车get！
   
2. 尝试机械臂

3. 开会+整理带到实验室的东西

### 6月28日

1. 两自由度机械臂√

    代码原来如此朴素

### 6月29日

1. 欢乐谷√

    激流勇进 + 野人谷漂流 除了排队久一点其他都很棒！

    水上飞机漂移好好玩

    能量风暴太疯狂了，全程闭眼+尖叫

2. 延期退宿有着落了？

    冷哥交材料时说可能推迟到20号

### 6月30日

1. 看《概率论导论》

2. [kazam视频问题](https://blog.csdn.net/weixin_45378779/article/details/123963231?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-123963231-blog-101122823.pc_relevant_multi_platform_whitelistv1&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-123963231-blog-101122823.pc_relevant_multi_platform_whitelistv1&utm_relevant_index=1)

    现象：可以播放，但插入PPT会引起卡死

    方案：

    ```
    安装ffmpeg
    sudo apt-get install ffmpeg

    调用命令
    ffmpeg -y -i input.mp4 -c:v libx264 -c:a aac -strict experimental -tune fastdecode -pix_fmt yuv420p -b:a 192k -ar 48000 output.mp4
    ```


### 7月11日

1. [安装ROS2](https://book.guyuehome.com)

2. [搜狗拼音](https://blog.csdn.net/mr_sudo/article/details/124874239)

### 7月12日

1. 牙牙顺其自然

2. 搬寝室，第一次在外面睡，还不错~

### 7月13日

1. 最后与629告别，带走我的小文竹

2. 打卡快递点 + 垃圾站

### 7月14日

1. ROS2学习

2. vscode启用自动编码

    ```
    files.autoGuessEncoding
    ```

3. 打卡稼和副食，毛桃确实挺好吃
   
4. 得知肖老师现在在外地，这几天都不能回来签字

5. RTOS：Real Time Operation System读作R-TOS？
2. 开始看SLAM深蓝学院教程

### 7月15日

1. 清除git信息

    `find . -name ".git" | xargs rm -Rf`
2. 里程计标定：

    1. 安装CSM库：sudo apt-get install ros-noetic-csm

    2. 修改cmakelist中路径名称

3. todo:
   1. 优化--Gnome-tweak-tools

        ```
        sudo apt-get install gnome-tweak-tools
        sudo apt-get install gnome
        sudo apt-get install gnome-shell-extension-top-icons-plus
        ```

    2. 为什么位姿差使用上一次坐标基础

    3. 减小轮子打滑影响的方式之一是在从动轮上增加编码器做里程计。因为打滑主要发生在主动轮上

### 7月17日

1. SLAM大会

    厦门大学王程老师做的激光雷达动作捕捉很有意思啊

    立个flag：半个月后官网重看大会视频

2. 高翔老师的《视觉十四讲》

    配合3Brown1Blue视频，真香

### 7月18日

1. 实锤食堂无优惠


### 7月19日

1. 改研电赛PPT

2. 看🐕爬草地、闯斜坡、越障碍

3. PPT 屏幕录制yyds

    开了一个空白PPT，插入-屏幕录制

### 7月20日

1. 赛前检查

### 7月21日

1. F80868

    电动自行车上牌成功！

2. 热身赛焦虑起来了

### 7月22日

1. 马术赛

    希望稳住，第一轮2队第三、1队第十

    还好是取最好值

    ![](https://pictures-kiana.oss-cn-beijing.aliyuncs.com/img/202207230805515.jpg)

    事实上前10名除了川大反超成为第一名，其他排名均无变化

    线上赛真的，，，无力吐槽，申诉不成还要扣分，要是放弃申诉就可以不扣分，又当又立

2. 嘟嘟看奥特曼

### 7月23日

1. 大概下午2点开赛

2. 催促李享申请马术赛最佳技术奖


### 7月28日

1. [VIM3重装](https://docs.khadas.com/linux/zh-cn/firmware/Vim3UbuntuFirmware.html)
   
   EMMC方式安装
   
   （果然，重装解决99%问题）

### 7月29日

阳新仙岛湖，有点点无聊，但鱼是真的好吃

### 7月30日

1. [火狐中文乱码](https://blog.csdn.net/weixin_46329735/article/details/115346188)
   
2. [vscode下载速度慢](https://blog.csdn.net/yanxiaoyang12580/article/details/118344553)

3. ubuntu右键无终端
   
    ```
    sudo apt-get install nautilus-extension-gnome-terminal   
    ```

    注销后重新登录就好

4. VLP16 ros2
   
   1. 搜索关键词 velodyne ros2
   
   2. [安装驱动](https://blog.csdn.net/qq_45701501/article/details/119275134)

        ```
        git clone --branch ros2 https://github.com/ros-drivers/velodyne.git
        ```

5. [北阳 ros2](https://github.com/ros-drivers/urg_node/tree/foxy-devel)

6. [ROS2入门](https://book.guyuehome.com/ROS2/2.%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5/2.1_%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%97%B4/)安装依赖
        
    ```
    sudo apt install -y python3-pip
    sudo pip3 install rosdepc
    sudo rosdepc init
    rosdepc update
    cd ..
    rosdepc install -i --from-path src --rosdistro foxy -y
    ```

### 8月2日

1. 返校

2. [dock美化](https://blog.csdn.net/leibris/article/details/124235785)

    ```
    #居中显示
    gsettings set org.gnome.shell.extensions.dash-to-dock extend-height false
    #点击DOCK中的图标后缩小应用窗口 默认为'previews'
    gsettings set org.gnome.shell.extensions.dash-to-dock click-action 'minimize'

    #将dock移动到窗口底部位置，如果习惯左边也可以不执行该行命令
    gsettings set org.gnome.shell.extensions.dash-to-dock dock-position "BOTTOM"
    #根据屏幕大小，给dock中的图标设置一个合适的大小值，习惯为64,48或32
    gsettings set org.gnome.shell.extensions.dash-to-dock dash-max-icon-size 32
    #移动鼠标到dock位置时自动显示
    gsettings set org.gnome.shell.extensions.dash-to-dock autohide true
    #全屏模式时自动隐藏Dock
    gsettings set org.gnome.shell.extensions.dash-to-dock autohide-in-fullscreen true
    #默认隐藏DOCK
    gsettings set org.gnome.shell.extensions.dash-to-dock dock-fixed false
    #隐藏延迟时间，通过该时间可以解决因DOCK隐藏导致菜单移动的问题，默认0.2
    gsettings set org.gnome.shell.extensions.dash-to-dock hide-delay 10.0
    #设置“应用”图标为左边,根据个人习惯，习惯右边的可以不用执行该行
    gsettings set org.gnome.shell.extensions.dash-to-dock show-apps-at-top true
    ```

3. [ROS2 牛逼](https://book.guyuehome.com/ROS2/2.%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5/2.9_%E5%88%86%E5%B8%83%E5%BC%8F%E9%80%9A%E4%BF%A1/)

    跨硬件，只需树莓派读取信息，用个人电脑进行数据处理就好

### 8月3日

1. [urg_node官方驱动](https://github.com/ros-drivers/urg_node/tree/foxy-devel)

    ![](https://pictures-kiana.oss-cn-beijing.aliyuncs.com/img/202208032119021.png)

    [虚假readme](https://github.com/ros-drivers/urg_node/issues/79)

    源码中将urg_node.cpp配置修改

    `serial_port_("/dev/ttyACM0"),`

2. [AppImage无法打开](https://blog.csdn.net/qq_37580586/article/details/124403162?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-0-124403162-blog-124956975.pc_relevant_multi_platform_featuressortv2dupreplace&spm=1001.2101.3001.4242.1&utm_relevant_index=3)

3. [Linux自动挂载windows下的磁盘](https://blog.csdn.net/qq_30965187/article/details/106299451)

    `sudo fdisk -l`
    
    ![](https://pictures-kiana.oss-cn-beijing.aliyuncs.com/img/202208032125899.png)

    `sudo gedit /etc/fstab`

    ![](https://pictures-kiana.oss-cn-beijing.aliyuncs.com/img/202208032127927.png)

### 8月4日

1. 献血小板

    七夕专属马克杯 √

    身体还是太虚（捂脸）

2. [clash for windows Linux版本](https://einverne.github.io/post/2021/10/linux-use-clash-for-windows.html)

3. [ROS2入门](https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Creating-A-Workspace/Creating-A-Workspace.html)

    ```
    rosdep install -i --from-path src --rosdistro humble -y
    colcon build --packages-select cpp_pubsub
    . install/setup.bash
    ```


### 8月5日

1. 查了些高压电相关知识

2. 我也是有学长罩的人了！

### 8月6日

1. 憨憨错误

    LED忘使能

    GPIO口记错

    ubuntu22不配，使用USB转TTL时，总是无法识别；VIM3与老电脑就很好

2. ubuntu 串口
   
    ```
    # 安装
    sudo apt-get install cutecom 
    # 使用
    cutecom   
    ```

### 8月7日

1. ROS2路径报错

    [删除install导致](https://blog.csdn.net/weixin_37532614/article/details/105951496)

    按照提示修改路径即可修改

    ```
    printenv AMENT_PREFIX_PATH

    AMENT_PREFIX_PATH = 
    ```

2. [ros2 bag](https://blog.csdn.net/weixin_37532614/article/details/106208312?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-106208312-blog-104407033.pc_relevant_multi_platform_featuressortv2dupreplace&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-106208312-blog-104407033.pc_relevant_multi_platform_featuressortv2dupreplace&utm_relevant_index=1)

    与ros1蛮多不同的，，，

    保存着是一个文件+一个配置文件，迷惑ing

    ```
    ros2 bag record -a
    ros2 bag play    
    ```
3. topic常用命令
    
    `ros2 topic list -t`

    ![](https://pictures-kiana.oss-cn-beijing.aliyuncs.com/img/202208071549527.png)

4. python写入数字

    ```
    #!/usr/bin/env python3
    # -*- coding: utf-8 -*-

    angel = -30
    i = 0

    with open("2.txt","w") as f:
    for i in range(700):
        number=-30 + 360/1024*i 
        text=f.write(str(number)+",")
        print(text)
    f.close()
    ```

### 8月8日

1. 傻傻的雷达避障√

2. 不知为何失败的VIM3

    自启动设置中将rviz的启动关了，不知道是不是这个原因

3. 分布式通信yyds
   
   .bashrc中添加：

   `export ROS_DOMAIN_ID=66`

4. [修改laser与map坐标系](https://answers.ros.org/question/372752/static_transform_publisher-in-ros2-launch-file/)

    ```
    tf_node = Node(
        package = "tf2_ros", 
        executable = "static_transform_publisher",
        arguments = ["0", "0", "0", "0", "0", "0", "map", "laser"])    

    return LaunchDescription([
            tf_node
        ])
    ```

### 8月9日

1. [多机通信](https://blog.csdn.net/catkin_ws/article/details/117480016?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-117480016-blog-118607292.pc_relevant_multi_platform_whitelistv1&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-117480016-blog-118607292.pc_relevant_multi_platform_whitelistv1&utm_relevant_index=1)

2. bag互换--暂时没啥用

3. [官方例程测试cartography](https://ros2-industrial-workshop.readthedocs.io/en/latest/_source/navigation/ROS2-Cartographer.html)

    人麻了

4. echo

    `ros2 topic echo /scan |grep frame_id`

5. cartography配置文件

    launch：

    ```python
    """
    Copyright 2018 The Cartographer Authors
    Copyright 2022 Wyca Robotics (for the ros2 conversion)

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
    """

    from launch import LaunchDescription
    from launch.actions import DeclareLaunchArgument, IncludeLaunchDescription, ExecuteProcess
    from launch.conditions import IfCondition, UnlessCondition
    from launch.substitutions import LaunchConfiguration
    from launch_ros.actions import Node, SetRemap
    from launch_ros.substitutions import FindPackageShare
    from launch.launch_description_sources import PythonLaunchDescriptionSource
    from launch.actions import Shutdown
    import os

    def generate_launch_description():

        use_sim_time = LaunchConfiguration('use_sim_time', default='false')

    ## ***** File paths ******
        pkg_share = FindPackageShare('cartographer_ros').find('cartographer_ros')
        urdf_dir = os.path.join(pkg_share, 'urdf')
        urdf_file = os.path.join(urdf_dir, 'backpack_2d.urdf')
        with open(urdf_file, 'r') as infp:
            robot_desc = infp.read()

        ## ***** Nodes *****
        robot_state_publisher_node = Node(
            package = 'robot_state_publisher',
            executable = 'robot_state_publisher',
            parameters=[
                {'robot_description': robot_desc},
                {'use_sim_time': use_sim_time}],
            output = 'screen'
            )

        cartographer_node = Node(
            package = 'cartographer_ros',
            executable = 'cartographer_node',
            parameters = [{'use_sim_time': use_sim_time}],
            arguments = [
                '-configuration_directory', FindPackageShare('cartographer_ros').find('cartographer_ros') + '/configuration_files',
                '-configuration_basename', 'my_2d.lua'],    ## 修改配置文件
            remappings = [
                ('scan', 'scan')],  ##注意修改此处
            output = 'screen'
            )

        cartographer_occupancy_grid_node = Node(
            package = 'cartographer_ros',
            executable = 'cartographer_occupancy_grid_node',
            parameters = [
                {'use_sim_time': use_sim_time},
                {'resolution': 0.05}],
            )

        rviz_node = Node(
            package = 'rviz2',
            executable = 'rviz2',
            on_exit = Shutdown(),
            arguments = ['-d', FindPackageShare('cartographer_ros').find('cartographer_ros') + '/configuration_files/my_2d.rviz'],
            parameters = [{'use_sim_time': use_sim_time}],
        )

        tf_node = Node(
            package = "tf2_ros", 
            executable = "static_transform_publisher",
            arguments = ["0", "0", "0", "0", "0", "0", "map", "laser"])     ## 修改此处


        return LaunchDescription([
            robot_state_publisher_node,
            cartographer_node,
            cartographer_occupancy_grid_node,
            rviz_node,
            tf_node
        ])

    ```

    my_2d.lua：

    ```lua
    -- Copyright 2016 The Cartographer Authors
    --
    -- Licensed under the Apache License, Version 2.0 (the "License");
    -- you may not use this file except in compliance with the License.
    -- You may obtain a copy of the License at
    --
    --      http://www.apache.org/licenses/LICENSE-2.0
    --
    -- Unless required by applicable law or agreed to in writing, software
    -- distributed under the License is distributed on an "AS IS" BASIS,
    -- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    -- See the License for the specific language governing permissions and
    -- limitations under the License.

    include "map_builder.lua"
    include "trajectory_builder.lua"

    options = {
    map_builder = MAP_BUILDER,
    trajectory_builder = TRAJECTORY_BUILDER,
    map_frame = "map",
    tracking_frame = "laser",
    published_frame = "laser",
    odom_frame = "odom",
    provide_odom_frame = false,
    publish_frame_projected_to_2d = false,
    use_pose_extrapolator = false, 
    use_odometry = false,--不使用里程计
    use_nav_sat = false,
    use_landmarks = false,

    num_laser_scans = 1,  --使用一个雷达
    num_multi_echo_laser_scans = 0,   --不使用多波雷达
    num_subdivisions_per_laser_scan = 1,  --不分割
    num_point_clouds = 0,
    lookup_transform_timeout_sec = 0.2,
    submap_publish_period_sec = 0.3,
    pose_publish_period_sec = 5e-3,
    trajectory_publish_period_sec = 30e-3,
    rangefinder_sampling_ratio = 1.,
    odometry_sampling_ratio = 1.,
    fixed_frame_pose_sampling_ratio = 1.,
    imu_sampling_ratio = 1.,
    landmarks_sampling_ratio = 1.,
    }

    MAP_BUILDER.use_trajectory_builder_2d = true    --启动2D SLAM
    TRAJECTORY_BUILDER_2D.submaps.num_range_data = 35
    TRAJECTORY_BUILDER_2D.min_range = 0.1   --URG测距： 0.06-4
    TRAJECTORY_BUILDER_2D.max_range = 4.
    TRAJECTORY_BUILDER_2D.missing_data_ray_length = 1.
    TRAJECTORY_BUILDER_2D.use_imu_data = false
    TRAJECTORY_BUILDER_2D.imu_gravity_time_constant = 9.8 
    TRAJECTORY_BUILDER_2D.use_online_correlative_scan_matching = true
    TRAJECTORY_BUILDER_2D.real_time_correlative_scan_matcher.linear_search_window = 0.1
    TRAJECTORY_BUILDER_2D.real_time_correlative_scan_matcher.translation_delta_cost_weight = 10.
    TRAJECTORY_BUILDER_2D.real_time_correlative_scan_matcher.rotation_delta_cost_weight = 1e-1
    POSE_GRAPH.optimization_problem.huber_scale = 1e2
    POSE_GRAPH.optimize_every_n_nodes = 35
    POSE_GRAPH.constraint_builder.min_score = 0.65

    return options
    

    ```        

6. 分布式通信出问题————重启？？？
   
   自启动时添加rviz会卡死，原因未知

   不能充电宝同时供显示屏和VIM3：重启警告